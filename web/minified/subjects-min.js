var subjectSelectionScreen=function(m,g){var p={LOADING:"loading"};var h=entity(m,g);var k=document.getElementById("subjectList"),b,a=[],j;(function(){var t=document.getElementById("backButtonSubjectSelectionScreen");b=entity(t,{}).on("select",d)}());h.loadSubjects=function(){n();return this};h.getSelectedSubject=function(){return j};function f(t){j=t.getData();h.fireEvent("subjectSelected")}function d(){h.fireEvent("back")}function n(){var t="rest/subjects";var u=new XMLHttpRequest();u.addEventListener("progress",s,false);u.addEventListener("load",l,false);u.addEventListener("error",i,false);u.addEventListener("abort",c,false);u.open("GET",t,true);u.send(null);m.classList.add(p.LOADING)}function e(t){logIt(t)}function s(t){if(t.lengthComputable){var u=t.loaded/t.total;logIt("progress: "+u)}else{}}function l(t){m.classList.remove(p.LOADING);logIt(t);var v=t.target;var u=JSON.parse(v.responseText)["subjects"];o(u)}function i(t){alert("An error occurred while transferring the file.")}function c(t){alert("The transfer has been canceled by the user.")}function o(t){q();for(var u=0;u<t.length;u++){r(t[u])}}function q(){a=[];while(k.lastChild){k.removeChild(k.lastChild)}}function r(u){var t=document.createElement("li");t.innerHTML=u.name;k.appendChild(t);var v=entity(t,u);v.on("select",f);return v}return h};